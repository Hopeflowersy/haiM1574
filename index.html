<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aesthetic Webcam + Balloon Game</title>

<style>
body { margin:0; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; overflow:hidden; background:linear-gradient(45deg,#ff8800,#ffffff); background-size:300% 300%; animation:gradientMove 8s ease infinite; font-family:"Poppins",sans-serif; position:relative; }
@keyframes gradientMove {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

@keyframes floatTitle { 0% { transform: translateY(0) rotate(-2deg); } 50% { transform: translateY(-8px) rotate(2deg); } 100% { transform: translateY(0) rotate(-2deg); } }
.title { font-size:32px; font-weight:700; color:#ffffff; text-shadow:0 0 12px #ffb84c,0 0 20px #ff9900; margin-bottom:10px; animation:floatTitle 3s ease-in-out infinite; }

/* DISUBSTITUTE AWAL: disembunyikan dulu */
.webcam-wrapper { display:none; justify-content:center; align-items:center; position:relative; z-index:10; }

#camera { width:35vw; max-width:380px; border-radius:20px; border:5px solid rgba(255,165,0,0.9); box-shadow:0 0 25px rgba(255,150,0,0.6),0 0 40px rgba(255,180,0.5); background:#000; position:relative; z-index:10; }
video { width:100%; border-radius:15px; }

.left-text,.right-text { position:absolute; top:50%; transform:translateY(-50%); font-size:22px; font-weight:600; color:#fffaee; text-shadow:0 0 12px #ff9900,0 0 20px #ff7700; line-height:1.2; z-index:11; }
.left-text { left:-350px; text-align:right; animation:floatLeft 3s ease-in-out infinite; }
.right-text { right:-300px; text-align:left; animation:floatRight 3s ease-in-out infinite; }

@keyframes floatLeft {0%{transform:translateY(0) rotate(-5deg);}50%{transform:translateY(-10px) rotate(-5deg);}100%{transform:translateY(0) rotate(-5deg);} }
@keyframes floatRight {0%{transform:translateY(0) rotate(5deg);}50%{transform:translateY(-10px) rotate(5deg);}100%{transform:translateY(0) rotate(5deg);} }

#textButton { margin-top:30px; padding:12px 25px; font-size:18px; border-radius:25px; border:none; background:#ff6f91; color:white; cursor:pointer; box-shadow:0 0 10px rgba(255,111,145,0.6); transition:background 0.3s, box-shadow 0.3s, transform 0.3s; z-index:12; position:relative;}
#textButton:hover { background:#ff4a70; }

@keyframes glowAnimation {0%,100%{box-shadow:0 0 10px #fff,0 0 20px #ff6f91,0 0 30px #ff4a70; transform:scale(1);}50%{box-shadow:0 0 20px #fff,0 0 30px #ff6f91,0 0 50px #ff4a70; transform:scale(1.05);} }
.glow-pulse { animation:glowAnimation 1.2s infinite; }

.glitter { position:fixed; top:-20px; width:12px; height:12px; background:white; opacity:0.9; border-radius:50%; pointer-events:none; z-index:1; box-shadow:0 0 10px white; animation:fall linear infinite; }
@keyframes fall {0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(110vh) scale(0.3);opacity:0;}}

.mouse-glitter { position:fixed; width:10px; height:10px; border-radius:50%; pointer-events:none; z-index:20; opacity:0.8; transform:translate(-50%,-50%); }

.balloon { position:absolute; z-index:50; border-radius:50% 50% 50% 50% / 60% 60% 40% 40%; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:24px; color:white; box-shadow:0 0 15px rgba(255,255,255,0.6),0 0 30px rgba(255,111,145,0.4); animation:floatUp 6s linear forwards; pointer-events:auto; user-select:none; }
@keyframes floatUp {0%{transform:translateY(0) scale(1); opacity:1;}50%{transform:translateY(-40vh) scale(1.05);}100%{transform:translateY(-80vh) scale(1); opacity:0;}}

.burst-emoji { position:absolute; font-size:28px; pointer-events:none; animation:popUp 1s ease forwards; z-index:55; }
@keyframes popUp {0%{transform:translateY(0) scale(0); opacity:1;}50%{transform:translateY(-20px) scale(1.3); opacity:1;}100%{transform:translateY(-50px) scale(1); opacity:0;}}

.particle { position:absolute; width:8px; height:8px; border-radius:50%; pointer-events:none; opacity:1; z-index:60; }

#scoreBoard { position: fixed; top:10px; right:10px; font-size:22px; color:white; text-shadow:0 0 10px #ff6f91; z-index:60; opacity:0; }
#timer { position: fixed; top:10px; left:10px; font-size:22px; color:white; text-shadow:0 0 10px #ff6f91; z-index:60; opacity:0; }

#gameOverPopup { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:linear-gradient(135deg,#ff6f91,#ffb677); padding:30px 50px; border-radius:30px; text-align:center; font-size:24px; display:none; box-shadow:0 0 30px #ff6f91; color:white; z-index:70; }
#gameOverPopup h1 { font-size:36px; margin:10px 0; }
#gameOverPopup p { font-size:28px; margin:5px 0; }
#closePopup { position:absolute; top:10px; right:15px; font-size:28px; cursor:pointer; }

@keyframes slideFadeIn {0%{transform:translateY(-30px);opacity:0;}60%{transform:translateY(10px);opacity:1;}100%{transform:translateY(0);opacity:1;}}

</style>
</head>
<body>

<div class="title">the prettiest girl in the worldd âœ¨</div>

<!-- HIDDEN BY DEFAULT -->
<div class="webcam-wrapper" id="webcamSection">
    <div class="left-text">Yang katanya mau jadi<br>independent womahhh ðŸ’…âœ¨</div>
    <div id="camera"><video id="webcam" autoplay playsinline></video></div>
    <div class="right-text">Calon Psikoloogi ðŸŽ“ðŸ§ </div>
</div>

<button id="textButton">Klik Aku âœ¨</button>

<audio id="bgMusic" src="https://files.catbox.moe/b8prwc.mp3"></audio>
<audio id="popSound" src="https://freesound.org/data/previews/522/522992_10752306-lq.mp3"></audio>

<div id="scoreBoard">Score: 0</div>
<div id="timer">Time: 60s</div>
<div id="gameOverPopup"></div>

<script>
// ========== WEBCAM PERMISSION FIX ==========
const webcamSection = document.getElementById("webcamSection");
const webcam = document.getElementById("webcam");

// Request kamera
navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    webcam.srcObject = stream;
    webcamSection.style.display = "flex"; // TAMPILKAN SETELAH DIIZINKAN
})
.catch(() => {
    const msg = document.createElement("div");
    msg.style.color = "white";
    msg.style.fontSize = "22px";
    msg.style.marginTop = "20px";
    msg.style.textShadow = "0 0 10px #ff6f91";
    msg.textContent = "Izinkan kamera dulu ya cantikk âœ¨ðŸ’–";
    document.body.appendChild(msg);
});

// Glitter
function createGlitter(){ const g=document.createElement("div"); g.classList.add("glitter"); const c=["#ffffff","#ffe9b0","#ffd27f","#ffb677","#ffc8ff"]; g.style.background=c[Math.floor(Math.random()*c.length)]; g.style.boxShadow=`0 0 10px ${g.style.background}`; g.style.left=Math.random()*100+"vw"; const s=Math.random()*10+4; g.style.width=g.style.height=s+"px"; document.body.appendChild(g); setTimeout(()=>g.remove(),5000);} setInterval(createGlitter,120);

// Mouse glitter
document.addEventListener("mousemove",(e)=>{ const d=document.createElement("div"); d.classList.add("mouse-glitter"); const c=["#fff","#ffe9b0","#ffd27f","#ffc8ff"]; d.style.background=c[Math.floor(Math.random()*c.length)]; d.style.boxShadow=`0 0 10px ${d.style.background}`; d.style.left=e.pageX+"px"; d.style.top=e.pageY+"px"; document.body.appendChild(d); setTimeout(()=>d.remove(),500); });

const btn=document.getElementById("textButton"); 
const music=document.getElementById("bgMusic"); 
const popSound=document.getElementById("popSound");
let clickCount=0; 
let score=0; 
let gameInterval;
const emojis=["ðŸ’¥","ðŸŽ‰","âœ¨","ðŸ˜","ðŸ˜‚","ðŸ­","ðŸŒˆ","ðŸ¥³","ðŸ’–","ðŸŒŸ"];

function createBalloon() {
    const b=document.createElement("div"); 
    b.classList.add("balloon");
    const size=Math.random()*30+40; 
    b.style.width=b.style.height=size+"px";
    b.style.left=Math.random()*90+"vw"; 
    b.style.top=(80+Math.random()*10)+"vh";
    const colors=["#ff6f91","#ffb677","#ffccff","#6fc3ff","#7fff6f"];
    b.style.background=`linear-gradient(145deg, ${colors[Math.floor(Math.random()*colors.length)]}, ${colors[Math.floor(Math.random()*colors.length)]})`;
    document.body.appendChild(b);

    b.clicked=false;

    b.addEventListener("click",(e)=>{
        e.stopPropagation();
        if(b.clicked) return;
        b.clicked=true;

        popSound.currentTime=0; popSound.play();

        const emoji=document.createElement("div"); 
        emoji.classList.add("burst-emoji"); 
        emoji.textContent=emojis[Math.floor(Math.random()*emojis.length)];
        const r=b.getBoundingClientRect();
        emoji.style.left=r.left+r.width/2+"px";
        emoji.style.top=r.top+r.height/2+"px";
        document.body.appendChild(emoji);
        setTimeout(()=>emoji.remove(),1000);

        const count=Math.floor(Math.random()*6)+6;
        for(let i=0;i<count;i++){
            const p=document.createElement("div"); 
            p.classList.add("particle");
            p.style.background=b.style.background;
            p.style.left=r.left+r.width/2+"px";
            p.style.top=r.top+r.height/2+"px";
            document.body.appendChild(p);
            const ang=Math.random()*2*Math.PI;
            const dist=Math.random()*80+30;
            const dx=Math.cos(ang)*dist;
            const dy=Math.sin(ang)*dist;
            p.animate([{transform:`translate(0,0) scale(1)`,opacity:1},{transform:`translate(${dx}px,${dy}px) scale(0.3)`,opacity:0}],{duration:600,easing:'ease-out',fill:'forwards'});
            setTimeout(()=>p.remove(),600);
        }

        b.remove();
        score++;
        document.getElementById("scoreBoard").textContent="Score: "+score;
    });

    setTimeout(()=>{ if(b.parentNode) b.remove(); },6000);
}

function startBalloonGame() {
    score=0;
    let timeLeft=60;

    document.getElementById("scoreBoard").textContent="Score: 0";
    document.getElementById("timer").textContent=`Time: ${timeLeft}s`;
    document.getElementById("scoreBoard").style.opacity="1";
    document.getElementById("timer").style.opacity="1";

    gameInterval=setInterval(createBalloon,800);

    const timerInt=setInterval(()=>{
        timeLeft--;
        const t=document.getElementById("timer");
        t.textContent=`Time: ${timeLeft}s`;
        if(timeLeft<=10) t.style.color="#ff4a70";
        else if(timeLeft<=30) t.style.color="#ffb677";
        if(timeLeft<=0) clearInterval(timerInt);
    },1000);

    setTimeout(()=>{
        clearInterval(gameInterval);
        document.querySelectorAll(".balloon").forEach(b=>b.remove());
        let msg="",em="";
        if(score<=10){ msg="cupu bat"; em="ðŸ˜…"; }
        else if(score<=20){ msg="cupu"; em="ðŸ˜…"; }
        else if(score<=30){ msg="lumayan dehh"; em="ðŸ˜Ž"; }
        else if(score<=49){ msg="jago dkit"; em="ðŸ˜"; }
        else{ msg="hebat jg sipaling girl boss ini"; em="âœ¨ðŸ’–"; }

        const pop=document.getElementById("gameOverPopup");
        pop.style.display="block";
        pop.innerHTML=`<span id="closePopup">Ã—</span><h1>Game Over!</h1><p>Score: ${score}</p><p>${msg} ${em}</p>`;
        document.getElementById("closePopup").addEventListener("click",()=>{ pop.style.display="none"; });
    },60000);
}

btn.addEventListener("click",()=>{ 
    clickCount++; 
    btn.classList.add("glow-pulse"); 
    setTimeout(()=>{ if(clickCount<4) btn.classList.remove("glow-pulse"); },1200);

    if(clickCount===1) btn.textContent="coba teken aku"; 
    else if(clickCount===2) btn.textContent="lagi"; 
    else if(clickCount===3) btn.textContent="btw ada mini game kecil nih"; 
    else if(clickCount>=4){
        if(music.paused){
            music.volume=0; music.play(); let v=0;
            const f=setInterval(()=>{
                v+=0.02; 
                if(v>=0.5){ v=0.5; clearInterval(f); startBalloonGame(); }
                music.volume=v;
            },100);
        }
        btn.disabled=true; 
        btn.textContent="Ketuk/Klik balon nya yh ðŸŽµ"; 
        btn.classList.add("glow-pulse");
    }
});
</script>

</body>
</html>
