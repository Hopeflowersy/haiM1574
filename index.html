<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aesthetic Webcam + Balloon Game</title>
<style>
body { margin:0; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; overflow:hidden; background:linear-gradient(45deg,#ff8800,#ffffff); background-size:300% 300%; animation:gradientMove 8s ease infinite; font-family:"Poppins",sans-serif; position:relative; }
@keyframes gradientMove {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
.title { font-size:32px; font-weight:700; color:#ffffff; text-shadow:0 0 12px #ffb84c,0 0 20px #ff9900; margin-bottom:10px; animation:floatTitle 3s ease-in-out infinite; }
@keyframes floatTitle {0%{transform: translateY(0) rotate(-2deg);}50%{transform: translateY(-8px) rotate(2deg);}100%{transform: translateY(0) rotate(-2deg);}}

.webcam-wrapper { display:none; justify-content:center; align-items:center; position:relative; z-index:10; }
#camera { width:35vw; max-width:380px; border-radius:20px; border:5px solid rgba(255,165,0,0.9); box-shadow:0 0 25px rgba(255,150,0,0.6),0 0 40px rgba(255,180,0.5); background:#000; position:relative; z-index:10; }
video { width:100%; border-radius:15px; }

.left-text,.right-text { position:absolute; top:50%; transform:translateY(-50%); font-size:22px; font-weight:600; color:#fffaee; text-shadow:0 0 12px #ff9900,0 0 20px #ff7700; line-height:1.2; z-index:11; }
.left-text { left:-350px; text-align:right; animation:floatLeft 3s ease-in-out infinite; }
.right-text { right:-300px; text-align:left; animation:floatRight 3s ease-in-out infinite; }
@keyframes floatLeft {0%{transform:translateY(0) rotate(-5deg);}50%{transform:translateY(-10px) rotate(-5deg);}100%{transform:translateY(0) rotate(-5deg);}}
@keyframes floatRight {0%{transform:translateY(0) rotate(5deg);}50%{transform:translateY(-10px) rotate(5deg);}100%{transform:translateY(0) rotate(5deg);}}

#textButton { margin-top:30px; padding:12px 25px; font-size:18px; border-radius:25px; border:none; background:#ff6f91; color:white; cursor:pointer; box-shadow:0 0 10px rgba(255,111,145,0.6); transition:background 0.3s, box-shadow 0.3s, transform 0.3s; z-index:12; position:relative;}
#textButton:hover { background:#ff4a70; }
.glow-pulse { animation:glowAnimation 1.2s infinite; }
@keyframes glowAnimation {0%,100%{box-shadow:0 0 10px #fff,0 0 20px #ff6f91,0 0 30px #ff4a70; transform:scale(1);}50%{box-shadow:0 0 20px #fff,0 0 30px #ff6f91,0 0 50px #ff4a70; transform:scale(1.05);} }

.popup-message { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:linear-gradient(135deg,#ff6f91,#ffb677); padding:20px 40px; border-radius:20px; text-align:center; color:white; font-size:22px; z-index:100; display:none; box-shadow:0 0 25px #ff6f91;}
.popup-message button { margin-top:15px; padding:8px 20px; font-size:18px; border-radius:15px; border:none; cursor:pointer; background:#fff; color:#ff6f91; font-weight:bold;}
</style>
</head>
<body>

<div class="title">the prettiest girl in the worldd âœ¨</div>

<div class="webcam-wrapper" id="webcamSection">
    <div class="left-text">Yang katanya mau jadi<br>independent womahhh ðŸ’…âœ¨</div>
    <div id="camera"><video id="webcam" autoplay playsinline></video></div>
    <div class="right-text">Calon Psikoloogi ðŸŽ“ðŸ§ </div>
</div>

<button id="textButton">Klik Aku âœ¨</button>

<audio id="bgMusic" src="https://files.catbox.moe/b8prwc.mp3"></audio>
<audio id="popSound" src="https://freesound.org/data/previews/522/522992_10752306-lq.mp3"></audio>

<div id="popupDenied" class="popup-message">
    Eh, izinkan kameranya dong biar seru âœ¨ðŸ’–
    <br><button id="closeDenied">Oke</button>
</div>

<script>
// ====== WEBCAM PERMISSION ======
const webcamSection = document.getElementById("webcamSection");
const webcam = document.getElementById("webcam");
const popupDenied = document.getElementById("popupDenied");
const closeDenied = document.getElementById("closeDenied");

navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    webcam.srcObject = stream;
    webcamSection.style.display = "flex"; // tampilkan webcam + teks pesan manis
})
.catch(() => {
    // kamera ditolak
    popupDenied.style.display = "block";
});

closeDenied.addEventListener("click", ()=>{
    popupDenied.style.display = "none";
});

// ====== Glitter ======
function createGlitter(){ const g=document.createElement("div"); g.style.position="fixed"; g.style.top="-20px"; g.style.width="12px"; g.style.height="12px"; g.style.borderRadius="50%"; g.style.pointerEvents="none"; g.style.zIndex="1"; g.style.animation="fall linear infinite"; const c=["#ffffff","#ffe9b0","#ffd27f","#ffb677","#ffc8ff"]; g.style.background=c[Math.floor(Math.random()*c.length)]; g.style.boxShadow=`0 0 10px ${g.style.background}`; g.style.left=Math.random()*100+"vw"; document.body.appendChild(g); setTimeout(()=>g.remove(),5000);} setInterval(createGlitter,120);
document.addEventListener("mousemove",(e)=>{ const d=document.createElement("div"); d.style.position="fixed"; d.style.width="10px"; d.style.height="10px"; d.style.borderRadius="50%"; d.style.pointerEvents="none"; d.style.zIndex="20"; d.style.opacity="0.8"; d.style.transform="translate(-50%,-50%)"; const c=["#fff","#ffe9b0","#ffd27f","#ffc8ff"]; d.style.background=c[Math.floor(Math.random()*c.length)]; d.style.boxShadow=`0 0 10px ${d.style.background}`; d.style.left=e.pageX+"px"; d.style.top=e.pageY+"px"; document.body.appendChild(d); setTimeout(()=>d.remove(),500); });

// ====== Tombol & Game ======
const btn=document.getElementById("textButton"); 
const music=document.getElementById("bgMusic"); 
const popSound=document.getElementById("popSound");
let clickCount=0; 
let score=0; 
let gameInterval;
const emojis=["ðŸ’¥","ðŸŽ‰","âœ¨","ðŸ˜","ðŸ˜‚","ðŸ­","ðŸŒˆ","ðŸ¥³","ðŸ’–","ðŸŒŸ"];

btn.addEventListener("click",()=>{ 
    clickCount++; 
    btn.classList.add("glow-pulse"); 
    setTimeout(()=>{ if(clickCount<4) btn.classList.remove("glow-pulse"); },1200);

    if(clickCount===1) btn.textContent="coba teken aku"; 
    else if(clickCount===2) btn.textContent="lagi"; 
    else if(clickCount===3) btn.textContent="btw ada mini game kecil nih"; 
    else if(clickCount>=4){
        if(music.paused){
            music.volume=0; music.play(); let v=0;
            const f=setInterval(()=>{
                v+=0.02; 
                if(v>=0.5){ v=0.5; clearInterval(f); startBalloonGame(); }
                music.volume=v;
            },100);
        }
        btn.disabled=true; 
        btn.textContent="Ketuk/Klik balon nya yh ðŸŽµ"; 
        btn.classList.add("glow-pulse");
    }
});

// ====== Balloon game function (sama seperti sebelumnya) ======
function createBalloon() {
    const b=document.createElement("div"); 
    b.classList.add("balloon");
    const size=Math.random()*30+40; 
    b.style.width=b.style.height=size+"px";
    b.style.left=Math.random()*90+"vw"; 
    b.style.top=(80+Math.random()*10)+"vh";
    const colors=["#ff6f91","#ffb677","#ffccff","#6fc3ff","#7fff6f"];
    b.style.background=`linear-gradient(145deg, ${colors[Math.floor(Math.random()*colors.length)]}, ${colors[Math.floor(Math.random()*colors.length)]})`;
    document.body.appendChild(b);

    b.clicked=false;

    b.addEventListener("click",(e)=>{
        e.stopPropagation();
        if(b.clicked) return;
        b.clicked=true;

        popSound.currentTime=0; popSound.play();

        const emoji=document.createElement("div"); 
        emoji.classList.add("burst-emoji"); 
        emoji.textContent=emojis[Math.floor(Math.random()*emojis.length)];
        const r=b.getBoundingClientRect();
        emoji.style.left=r.left+r.width/2+"px";
        emoji.style.top=r.top+r.height/2+"px";
        document.body.appendChild(emoji);
        setTimeout(()=>emoji.remove(),1000);

        const count=Math.floor(Math.random()*6)+6;
        for(let i=0;i<count;i++){
            const p=document.createElement("div"); 
            p.classList.add("particle");
            p.style.background=b.style.background;
            p.style.left=r.left+r.width/2+"px";
            p.style.top=r.top+r.height/2+"px";
            document.body.appendChild(p);
            const ang=Math.random()*2*Math.PI;
            const dist=Math.random()*80+30;
            const dx=Math.cos(ang)*dist;
            const dy=Math.sin(ang)*dist;
            p.animate([{transform:`translate(0,0) scale(1)`,opacity:1},{transform:`translate(${dx}px,${dy}px) scale(0.3)`,opacity:0}],{duration:600,easing:'ease-out',fill:'forwards'});
            setTimeout(()=>p.remove(),600);
        }

        b.remove();
        score++;
        document.getElementById("scoreBoard").textContent="Score: "+score;
    });

    setTimeout(()=>{ if(b.parentNode) b.remove(); },6000);
}

function startBalloonGame() {
    score=0;
    let timeLeft=60;

    document.getElementById("scoreBoard").textContent="Score: 0";
    document.getElementById("timer").textContent=`Time: ${timeLeft}s`;
    document.getElementById("scoreBoard").style.opacity="1";
    document.getElementById("timer").style.opacity="1";

    gameInterval=setInterval(createBalloon,800);

    const timerInt=setInterval(()=>{
        timeLeft--;
        const t=document.getElementById("timer");
        t.textContent=`Time: ${timeLeft}s`;
        if(timeLeft<=10) t.style.color="#ff4a70";
        else if(timeLeft<=30) t.style.color="#ffb677";
        if(timeLeft<=0) clearInterval(timerInt);
    },1000);

    setTimeout(()=>{
        clearInterval(gameInterval);
        document.querySelectorAll(".balloon").forEach(b=>b.remove());
        let msg="",em="";
        if(score<=10){ msg="cupu bat"; em="ðŸ˜…"; }
        else if(score<=20){ msg="cupu"; em="ðŸ˜…"; }
        else if(score<=30){ msg="lumayan dehh"; em="ðŸ˜Ž"; }
        else if(score<=49){ msg="jago dkit"; em="ðŸ˜"; }
        else{ msg="hebat jg sipaling girl boss ini"; em="âœ¨ðŸ’–"; }

        const pop=document.getElementById("gameOverPopup");
        pop.style.display="block";
        pop.innerHTML=`<span id="closePopup">Ã—</span><h1>Game Over!</h1><p>Score: ${score}</p><p>${msg} ${em}</p>`;
        document.getElementById("closePopup").addEventListener("click",()=>{ pop.style.display="none"; });
    },60000);
}
</script>

</body>
</html>
